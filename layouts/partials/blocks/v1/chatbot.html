{{/* Chatbot Widget - Two-column layout: left title, right chat */}}
<div class="col-12 col-lg-8 chatbot-content-col">
<div class="chatbot-widget-wrapper">
  <div id="chatbot-widget" class="chatbot-widget">
    <div id="chatbot-messages" class="chatbot-messages">
      <div class="chatbot-welcome">
        <span class="chatbot-welcome-icon">ðŸ’¬</span>
        <p>Hi! Want to know more about me? Type a message below to get started.</p>
      </div>
    </div>
    <div id="chatbot-input" class="chatbot-input">
      <input type="text" id="chatbot-input-field" placeholder="Type a message, press Enter to send..." />
      <button id="chatbot-send" class="chatbot-send-btn">Send</button>
    </div>
  </div>
</div>
</div>
<style>
.wg-chatbot .section-heading{position:relative;padding-right:1.5rem}
.wg-chatbot .section-heading::after{content:'';position:absolute;right:-.75rem;top:0;bottom:0;width:1px;background:rgba(0,0,0,.12)}
.dark .wg-chatbot .section-heading::after{background:rgba(255,255,255,.2)}
.wg-chatbot .chatbot-content-col{padding-left:1.5rem}
@media (max-width:991.98px){.wg-chatbot .section-heading::after{display:none}
.wg-chatbot .section-heading{padding-right:0;padding-bottom:1rem;margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.12)}
.dark .wg-chatbot .section-heading{border-bottom-color:rgba(255,255,255,.2)}}
.chatbot-widget-wrapper{width:100%;max-width:740px;margin:0 auto;padding:0}
.chatbot-widget{height:340px;display:flex;flex-direction:column;overflow:hidden}
.chatbot-messages{height:260px;overflow-y:auto;padding:16px 0;display:flex;flex-direction:column;gap:12px;flex-shrink:0}
.chatbot-messages{scrollbar-width:thin;scrollbar-color:rgba(0,0,0,.3) transparent}
.chatbot-messages::-webkit-scrollbar{width:8px}
.chatbot-messages::-webkit-scrollbar-track{background:transparent}
.chatbot-messages::-webkit-scrollbar-thumb{border-radius:4px;background:rgba(0,0,0,.2)}
.chatbot-welcome{text-align:center;padding:32px 20px;color:inherit;opacity:.7}
.chatbot-welcome-icon{font-size:36px;display:block;margin-bottom:8px;opacity:.5}
.chatbot-welcome p{margin:0;font-size:.9rem;line-height:1.6}
.chatbot-input{padding:14px 0 0;display:flex;gap:10px;align-items:center;border-top:1px solid rgba(0,0,0,.08);flex-shrink:0}
.chatbot-input input{flex:1;padding:10px 14px;border:1px solid rgba(0,0,0,.12);border-radius:20px;font-size:.88rem;background:#fff;color:rgba(0,0,0,.87);transition:border-color .2s,box-shadow .2s}
.chatbot-input input::placeholder{opacity:.6}
.chatbot-input input:focus{outline:none;border-color:#2962ff;box-shadow:0 0 0 3px rgba(41,98,255,.2)}
.chatbot-send-btn{padding:10px 20px;background:#2962ff;color:#fff;border:none;border-radius:20px;cursor:pointer;font-weight:500;font-size:.9rem;transition:opacity .2s,transform .05s}
.chatbot-send-btn:hover{opacity:.92}
.chatbot-send-btn:active{transform:scale(.98)}
.chatbot-send-btn:disabled{opacity:.6;cursor:not-allowed}
.chatbot-msg{padding:10px 16px;border-radius:16px;max-width:80%;line-height:1.5;font-size:.85rem}
.chatbot-msg-user{background:#2962ff;color:#fff;margin-left:auto;align-self:flex-end;border-bottom-right-radius:6px}
.chatbot-msg-bot{background:rgba(0,0,0,.08);color:inherit;align-self:flex-start;border-bottom-left-radius:6px}
.dark .chatbot-input{border-top-color:rgba(255,255,255,.08)}
.dark .chatbot-input input{border-color:rgba(255,255,255,.2);background:rgb(68,71,90);color:rgb(248,248,242)}
.dark .chatbot-input input:focus{border-color:#5b8ef4;box-shadow:0 0 0 3px rgba(91,142,244,.25)}
.dark .chatbot-msg-bot{background:rgba(255,255,255,.1)}
.dark .chatbot-messages{scrollbar-color:rgba(255,255,255,.3) transparent}
.dark .chatbot-messages::-webkit-scrollbar-thumb{background:rgba(255,255,255,.25)}
</style>
<script>
(function(){
  var API='https://api.yangxiaoma.org/api/chat';
  var DEMO_MODE=API.indexOf('your-server.com')>=0;
  var m=document.getElementById('chatbot-messages'),i=document.getElementById('chatbot-input-field'),b=document.getElementById('chatbot-send');
  if(!m)return;
  var welcome=m.querySelector('.chatbot-welcome');
  var SESSION_ID=sessionStorage.getItem('chatbot_session')||(typeof crypto!=='undefined'&&crypto.randomUUID?crypto.randomUUID():'s_'+Math.random().toString(36).slice(2)+Date.now().toString(36));
  sessionStorage.setItem('chatbot_session',SESSION_ID);
  function add(txt,u){
    if(welcome)welcome.style.display='none';
    var d=document.createElement('div');d.className='chatbot-msg '+(u?'chatbot-msg-user':'chatbot-msg-bot');d.textContent=txt;m.appendChild(d);m.scrollTop=m.scrollHeight;
  }
  function send(){
    var txt=i.value.trim();if(!txt)return;
    add(txt,1);i.value='';b.disabled=true;
    if(DEMO_MODE){
      setTimeout(function(){add('Demo mode: I received "'+txt+'". Configure the API URL to connect to your backend.',0);b.disabled=false;},500);
      return;
    }
    fetch(API,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:txt,session_id:SESSION_ID})})
      .then(function(r){return r.json()})
      .then(function(d){add(d.reply||'Something went wrong.',0)})
      .catch(function(e){add('Connection failed: '+e.message,0)})
      .finally(function(){b.disabled=false});
  }
  b.onclick=send;
  i.onkeypress=function(e){if(e.key==='Enter')send()};
})();
</script>
